<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Class 4 : grep and awk &mdash; Genome Analysis Workshop 0.2 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.2.0/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Genome Analysis Workshop 0.2 documentation" href="../index.html" />
    <link rel="up" title="Class list" href="../Classes.html" />
    <link rel="next" title="Class 5 : BEDTools" href="class-05.html" />
    <link rel="prev" title="Class 3 : The command-line (part 2)" href="class-03.html" /> 

<!-- Google Analytics tracking code -->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54095998-2', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Genome Analysis Workshop</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="http://hesselberthlab.github.io">Hesselberth lab</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Genome Analysis Workshop <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Syllabus.html">Syllabus</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../Classes.html">Class list</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Exercises.html">Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Problem_Sets.html">Problem Sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Miscellaneous.html">Miscellaneous</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">Class 4 : grep and awk</a><ul>
<li><a class="reference internal" href="#goals">Goals</a></li>
<li><a class="reference internal" href="#grep">grep</a></li>
<li><a class="reference internal" href="#exercises">Exercises</a></li>
<li><a class="reference internal" href="#awk">awk</a></li>
<li><a class="reference internal" href="#basic-principles">basic principles</a></li>
<li><a class="reference internal" href="#awk-program-structure">awk program structure</a></li>
<li><a class="reference internal" href="#awk-begin">awk BEGIN</a></li>
<li><a class="reference internal" href="#filtering">filtering</a></li>
<li><a class="reference internal" href="#program-structure">program structure</a></li>
<li><a class="reference internal" href="#in-class-exercise">in-class exercise</a></li>
<li><a class="reference internal" href="#awk-program-structure-actions">awk program structure (actions)</a></li>
<li><a class="reference internal" href="#id1">in-class exercise</a></li>
<li><a class="reference internal" href="#awk-continued">awk continued</a></li>
<li><a class="reference internal" href="#awk-special-variables">awk special variables</a></li>
<li><a class="reference internal" href="#using-awk-to-count-lines-with-nr">using awk to count lines with NR</a></li>
<li><a class="reference internal" href="#using-fs-and-ofs">using FS and OFS</a></li>
<li><a class="reference internal" href="#regular-expressions">regular expressions</a></li>
<li><a class="reference internal" href="#advanced-awk">advanced awk</a></li>
<li><a class="reference internal" href="#in-class-exercises-class-4">In Class Exercises - Class 4</a></li>
<li><a class="reference internal" href="#review">review</a></li>
<li><a class="reference internal" href="#id2">Exercises</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    <div class="col-md-9">
      
  <div class="section" id="class-4-grep-and-awk">
<h1>Class 4 : grep and awk<a class="headerlink" href="#class-4-grep-and-awk" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#class-4-grep-and-awk" title="Slides">§</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Class date:</th><td class="field-body">2015 Feb 5 Thurs</td>
</tr>
<tr class="field-even field"><th class="field-name">Last updated:</th><td class="field-body">April 09, 2015</td>
</tr>
</tbody>
</table>
<div class="section" id="goals">
<h2>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#goals" title="Slides">§</a></h2>
<ol class="arabic simple">
<li>Review</li>
<li>remember BED format (chr, start, end)</li>
<li>learn grep and awk basics to filter and manipulate text</li>
</ol>
</div>
<div class="section" id="grep">
<h2>grep<a class="headerlink" href="#grep" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#grep" title="Slides">§</a></h2>
<p>Use <a class="reference external" href="http://linux.die.net/man/1/grep">grep(1)</a> to identify lines in a file that match a specified pattern.</p>
<p>To find any instance of <em>chr5</em> in the lamina.bed file</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># grep [pattern] [filename]</span>
<span class="nv">$ </span>grep chr5 /vol1/opt/data/lamina.bed <span class="p">|</span> head
</pre></div>
</div>
<p>To find all lines that start with a number sign:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># The caret (^) matches the beginning of the line</span>
<span class="c"># FYI dollar sign ($) matches the end</span>
<span class="nv">$ </span>grep <span class="s1">&#39;^#&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
<p>To find any line that <em>does not</em> start with &#8220;chr&#8221;:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># the -v flag inverts the match (grep &quot;not&quot; [pattern])</span>
<span class="nv">$ </span>grep -v <span class="s1">&#39;^chr&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
<p>Beware of using <code class="docutils literal"><span class="pre">grep</span></code> to find patterns that might be partial matches:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># this will match chr1, chr10, chr11 etc.</span>
<span class="nv">$ </span>grep chr1 /vol1/opt/data/lamina.bed <span class="p">|</span> cut -f1 <span class="p">|</span> uniq
</pre></div>
</div>
<p>You can find exact matches that are split on words with the <code class="docutils literal"><span class="pre">-w</span></code> flag:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># this will only match chr1</span>
<span class="nv">$ </span>grep -w chr1 /vol1/opt/data/lamina.bed <span class="p">|</span> cut -f1 <span class="p">|</span> uniq
</pre></div>
</div>
<p>Beware of using <code class="docutils literal"><span class="pre">grep</span></code> to search for numbers:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># finds all strings that match `100`</span>
<span class="nv">$ </span>grep <span class="m">100</span> /vol1/opt/data/lamina.bed <span class="p">|</span> head -n 20

<span class="c"># better, but doesn&#39;t look at numeric value</span>
<span class="nv">$ </span>grep -w <span class="m">100</span> /vol1/opt/data/lamina.bed <span class="p">|</span> head -n 20
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>If you&#8217;re trying to find numeric values in a file, use <code class="docutils literal"><span class="pre">awk</span></code>
instead:</p>
<div class="last highlight-python"><div class="highlight"><pre>$ awk &#39;$2 == 500&#39; /vol1/opt/data/lamina.bed
</pre></div>
</div>
</div>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#exercises" title="Slides">§</a></h2>
<ol class="arabic simple">
<li>use <code class="docutils literal"><span class="pre">grep</span></code> to identify lines in lamina.bed where the second field
(start) begins with <code class="docutils literal"><span class="pre">100</span></code>.</li>
<li>use <code class="docutils literal"><span class="pre">grep</span></code> to identify lines in lamina.bed where the third field
(end) ends with 99 .</li>
<li>use <code class="docutils literal"><span class="pre">grep</span></code> with its <code class="docutils literal"><span class="pre">-w</span></code> flag to count the number of &#8216;chr1&#8217;
records in lamina.bed.</li>
<li>use <code class="docutils literal"><span class="pre">grep</span></code> to count how many fastq records are in the
/vol1/opt/data/t_R1.fastq.gz file (fastq records begin with an
&#8216;&#64;&#8217; symbol)</li>
<li>use <code class="docutils literal"><span class="pre">grep</span></code> to count the number of fastq records in
/vol1/opt/data/SP1.fq.gz</li>
</ol>
</div>
<div class="section" id="awk">
<h2>awk<a class="headerlink" href="#awk" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#awk" title="Slides">§</a></h2>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/AWK">http://en.wikipedia.org/wiki/AWK</a></p>
<p><code class="docutils literal"><span class="pre">AWK</span></code> is an interpreted <strong>programming language</strong> designed for text
processing and typically used as a data extraction and reporting tool. It
is a standard feature of most Unix-like operating systems.</p>
<p>Named after authors <strong>A</strong> ho, <strong>W</strong> einberger &amp; <strong>K</strong> ernighan</p>
<p><strong>This is programming</strong></p>
</div>
<div class="section" id="basic-principles">
<h2>basic principles<a class="headerlink" href="#basic-principles" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#basic-principles" title="Slides">§</a></h2>
<ol class="arabic simple">
<li>awk operates on each line of a text file</li>
<li>in an awk program, $1 is an alias for the 1st column, $2 for the 2nd, etc.</li>
<li>awk can filter lines by a pattern</li>
</ol>
</div>
<div class="section" id="awk-program-structure">
<h2>awk program structure<a class="headerlink" href="#awk-program-structure" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#awk-program-structure" title="Slides">§</a></h2>
<ul class="simple">
<li><strong>BEGIN</strong> runs before the program starts</li>
<li><strong>END</strong> runs after the program runs through all lines in the file</li>
<li><strong>PATTERN</strong> and <strong>ACTIONS</strong> check and execute on each line.</li>
</ul>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;BEGIN {} (PATTERN) { ACTIONS } END {}&#39;</span> some.file.txt
</pre></div>
</div>
</div>
<div class="section" id="awk-begin">
<h2>awk BEGIN<a class="headerlink" href="#awk-begin" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#awk-begin" title="Slides">§</a></h2>
<p>You can use <strong>BEGIN</strong> without a file. We just do one thing then exit:</p>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;BEGIN { print 12 * 12 }&#39;</span>
</pre></div>
</div>
<p>Same with <strong>END</strong>:</p>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;END { print 12 * 13 }&#39;</span>
<span class="c"># then type ctrl+d so it knows it&#39;s not getting more input.</span>
</pre></div>
</div>
</div>
<div class="section" id="filtering">
<h2>filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#filtering" title="Slides">§</a></h2>
<p>A simple and powerful use of awk is lines that match a pattern or meet set
of criteria. Here, we match (and implicitly print) only lines where the
first column is chr12:</p>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;($1 == &quot;chr12&quot;)&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
<p>We can also filter on start position using &#8216;&amp;&amp;&#8217; which means &#8216;and&#8217;:</p>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;($1 == &quot;chr12&quot; &amp;&amp; $2 &lt; 9599990)&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p><code class="docutils literal"><span class="pre">=</span></code> and <code class="docutils literal"><span class="pre">==</span></code> are not the same thing, and are frequently mixed up.</p>
<p class="last"><code class="docutils literal"><span class="pre">=</span></code> is the assignment operator
<code class="docutils literal"><span class="pre">==</span></code> tests for equality
<code class="docutils literal"><span class="pre">!=</span></code> tests for inequality.</p>
</div>
</div>
<div class="section" id="program-structure">
<h2>program structure<a class="headerlink" href="#program-structure" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#program-structure" title="Slides">§</a></h2>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;($1 == &quot;chr12&quot; &amp;&amp; $2 &lt; 9599990)&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<ul class="last simple">
<li>when we are checking as a character (&#8220;chr12&#8221;) we need the quotes.</li>
<li>when we are checking as a number (9599990) can not use quotes.</li>
<li>can&#8217;t use commas (e.g. 9,599,990) in numbers</li>
</ul>
</div>
</div>
<div class="section" id="in-class-exercise">
<h2>in-class exercise<a class="headerlink" href="#in-class-exercise" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#in-class-exercise" title="Slides">§</a></h2>
<p>we will do the first of these together.</p>
<ol class="arabic simple">
<li>how many regions (lines) in lamina.bed have a start less than 1,234,567 on any chromosome?</li>
<li>how many regions in lamina.bed have a start less than 1,234,567 on chromosome 8?</li>
<li>how many regions (lines) in lamina.bed have a start between 50,000 and 951,000</li>
<li>how many regions in lamina.bed overlap the interval <strong>chr12:5,000,000-6,000,000</strong> ?</li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">the last question is not trivial and understanding it will be useful</p>
</div>
</div>
<div class="section" id="awk-program-structure-actions">
<h2>awk program structure (actions)<a class="headerlink" href="#awk-program-structure-actions" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#awk-program-structure-actions" title="Slides">§</a></h2>
<p>print total bases covered on chromosome 13:</p>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;($1 == &quot;chr13&quot;) { coverage = coverage + $3 - $2 }</span>
<span class="s1">     END { print coverage }&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<ol class="last arabic">
<li><dl class="first docutils">
<dt>the entire awk program must be wrapped in quotes. Nearly always best to use</dt>
<dd><p class="first last">single quotes (&#8216;) on the outside.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><em>coverage</em> is a variable that stores values; we don&#8217;t use</dt>
<dd><p class="first last">a $ to access it like we do in bash or like we do for the $1,
$2, ... columns</p>
</dd>
</dl>
</li>
</ol>
</div>
</div>
<div class="section" id="id1">
<h2>in-class exercise<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#id1" title="Slides">§</a></h2>
<p>below is how we find coverage for chr13.</p>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;($1 == &quot;chr13&quot;) { coverage += $3 - $2 }</span>
<span class="s1">     END{ print coverage }&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
<p>how can we find the total coverage for all chromsomes <strong>except</strong> 13?</p>
</div>
<div class="section" id="awk-continued">
<h2>awk continued<a class="headerlink" href="#awk-continued" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#awk-continued" title="Slides">§</a></h2>
<p>The <code class="docutils literal"><span class="pre">$0</span></code> variable contains the entire line.</p>
<p>multiple patterns</p>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;$3 &gt;= 5000 { print $0&quot;\tGREATER&quot; }</span>
<span class="s1">     $3  &lt; 5000   { print $0&quot;\tLESS&quot; }&#39;</span> <span class="se">\</span>
      /vol1/opt/data/states.tab
</pre></div>
</div>
<p>remember we can simply filter to the lines &gt; 5000 with:</p>
<div class="highlight-bash"><div class="highlight"><pre>awk <span class="s1">&#39;$3 &gt;= 5000&#39;</span> /vol1/opt/data/states.tab
</pre></div>
</div>
</div>
<div class="section" id="awk-special-variables">
<h2>awk special variables<a class="headerlink" href="#awk-special-variables" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#awk-special-variables" title="Slides">§</a></h2>
<ol class="arabic simple">
<li>we know <em>$1</em>, <em>$2</em>, ... for the column numbers</li>
<li>NR is a special variable that holds the line number</li>
<li>NF is a special variable that holds the number of fields in the line</li>
<li>FS and OFS are the (F)ield and (O)output (F)ield (S)eparators
i.e. the delimiters (default is any space character)</li>
</ol>
</div>
<div class="section" id="using-awk-to-count-lines-with-nr">
<h2>using awk to count lines with NR<a class="headerlink" href="#using-awk-to-count-lines-with-nr" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#using-awk-to-count-lines-with-nr" title="Slides">§</a></h2>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>wc -l /vol1/opt/data/lamina.bed

<span class="nv">$ </span>awk <span class="s1">&#39;END { print NR }&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
</div>
<div class="section" id="using-fs-and-ofs">
<h2>using FS and OFS<a class="headerlink" href="#using-fs-and-ofs" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#using-fs-and-ofs" title="Slides">§</a></h2>
<p>Let&#8217;s convert lamina.bed to comma-delimited but only for chr12</p>
<p>remember FS is the input separator and OFS is the output delimiter</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>awk <span class="s1">&#39;BEGIN{FS=&quot;\t&quot;; OFS=&quot;,&quot;}</span>
<span class="s1">    ($1 == &quot;chr12&quot;){ print $1,$2,$3 }&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
</div>
<div class="section" id="regular-expressions">
<h2>regular expressions<a class="headerlink" href="#regular-expressions" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#regular-expressions" title="Slides">§</a></h2>
<p>we won&#8217;t cover these in detail, but you can match on <em>regular expressions</em>.</p>
<p>The following finds lines containing chr2 (chr2, chr20, chr21) in the first column</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>awk <span class="s1">&#39;$1 ~ /chr2/&#39;</span> /vol1/opt/data/lamina.bed
</pre></div>
</div>
<p>Often we can get by without <em>regular expressions</em> but they are extremeley powerful
and available in nearly all programming languages.</p>
</div>
<div class="section" id="advanced-awk">
<h2>advanced awk<a class="headerlink" href="#advanced-awk" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#advanced-awk" title="Slides">§</a></h2>
<p>You can do a lot more with awk, here are several resources:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.hcs.harvard.edu/~dholland/computers/awk.html">http://www.hcs.harvard.edu/~dholland/computers/awk.html</a></li>
<li><a class="reference external" href="http://doc.infosnel.nl/quickawk.html">http://doc.infosnel.nl/quickawk.html</a></li>
<li><a class="reference external" href="http://www.catonmat.net/download/awk.cheat.sheet.pdf">http://www.catonmat.net/download/awk.cheat.sheet.pdf</a></li>
</ul>
</div>
<div class="section" id="in-class-exercises-class-4">
<span id="class-4-exercises"></span><h2>In Class Exercises - Class 4<a class="headerlink" href="#in-class-exercises-class-4" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#in-class-exercises-class-4" title="Slides">§</a></h2>
<p>we will do the first 2 of these together.</p>
<ol class="arabic simple">
<li>use NR to print each line of <cite>lamina.bed</cite> <em>preceded</em> by it&#8217;s line number</li>
<li>use NF to see how many columns are in each row of <cite>states.tab</cite></li>
</ol>
</div>
<div class="section" id="review">
<h2>review<a class="headerlink" href="#review" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#review" title="Slides">§</a></h2>
<ul class="simple">
<li>$1, $2, $3 (default sep is space)</li>
<li>adjust sep with: OFS=&#8221;t&#8221;; FS=&#8221;,&#8221;</li>
<li>$0 # entire line</li>
</ul>
<div class="highlight-awk"><div class="highlight"><pre><span class="nb">BEGIN</span> <span class="p">{}</span>
<span class="p">(</span><span class="kr">match</span><span class="p">)</span> <span class="p">{</span> <span class="nx">coverage</span> <span class="o">+=</span> <span class="o">$</span><span class="mi">3</span> <span class="o">-</span> <span class="o">$</span><span class="mi">2</span> <span class="p">}</span>
<span class="nb">END</span> <span class="p">{</span> <span class="kr">print</span> <span class="nx">coverage</span> <span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>NR is line number; NF is number of fields;</li>
<li>BEGIN {} filter { action } END { }</li>
</ul>
</div>
<div class="section" id="id2">
<h2>Exercises<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a><a class="headerlink" href="../slides/Classes/class-04.html#id2" title="Slides">§</a></h2>
<ol class="arabic simple">
<li>are there any regions in <cite>lamina.bed</cite> with start &gt; end?</li>
<li>what is the total coverage [sum of (end - start)] of regions on chr13 in <cite>lamina.bed</cite>?</li>
<li>what is the mean value (4th column) on chromome 3 of <cite>lamina.bed</cite></li>
<li>print out only the header and the entry for colorado in <cite>states.tab</cite></li>
<li>what is the (single-number) sum of all the incomes for <cite>states.tab</cite>
with illiteracy rate less than 0.1? greater than 2?</li>
<li>use NR to filter out the header from <cite>lamina.bed</cite> (hint: what is NR for the header?)</li>
</ol>
</div>
</div>


    </div>
      
  </div>
</div>
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

  </body>
</html>